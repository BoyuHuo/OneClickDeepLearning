(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app-index"],{"2fa3":function(e,t,o){"use strict";var s=o("53ce"),a=o.n(s);a.a},"53ce":function(e,t,o){},7528:function(e,t,o){"use strict";var s=o("9d8f"),a=o.n(s);a.a},"7abe":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("vue-canvas-nest",{attrs:{config:e.cavans_config}}),o("header-nav",{attrs:{projectList:e.projectList},on:{refreshProjectList:e.handleProjectList}}),o("second-nav",{on:{launchContainer:e.handleLaunchContainer}}),o("side-nav",{on:{projectSetting:e.handleProjectSetting}}),o("el-row",{staticStyle:{"margin-top":"20px"}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-tabs",{staticStyle:{overflow:"auto"},attrs:{type:"border-card",closable:""},on:{"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[e._l(e.editableTabs,(function(t){return o("el-tab-pane",{key:t.name,staticStyle:{height:"600px",overflow:"auto"},attrs:{label:t.title,name:t.name}},["notebook"==t.type?o("el-popover",{staticStyle:{position:"fixed","margin-top":"550px","margin-left":"10px"},attrs:{placement:"right",trigger:"hover"}},[o("el-button-group",[o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.openNotebookInNewBroser(t.url)}}},[e._v("Open In A New Browser")]),o("el-button",{attrs:{type:"primary"},on:{click:e.handleStaging}},[e._v("Stage Models")]),o("el-button",{attrs:{type:"primary"}},[e._v("Release Resources")])],1),o("el-button",{attrs:{slot:"reference",type:"warning",plain:""},slot:"reference"},[e._v(" Operations "),o("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1):e._e(),o("span",{domProps:{innerHTML:e._s(t.content)}})],1)})),e.isProjectSettingShow?o("el-tab-pane",{key:"projectSetting",staticStyle:{height:"600px",overflow:"auto"},attrs:{label:"Projects Setting",name:"project",closable:!1},on:{"tab-remove":e.removeSettingTab}},[o("project-setting",{attrs:{projectList:e.projectList},on:{refreshProjectList:e.handleProjectList}})],1):e._e(),e.isModelCenterShow?o("el-tab-pane",{key:"modelCenter",staticStyle:{height:"600px",overflow:"auto"},attrs:{label:"Model Center",name:"model",closable:!1},on:{"tab-remove":e.removeSettingTab}},[o("model-center",{attrs:{projectList:e.projectList},on:{refreshProjectList:e.handleProjectList}})],1):e._e()],2)],1)],1)],1)},a=[],r=(o("4de4"),o("4160"),o("b0c0"),o("159b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal"}},[s("div",{staticClass:"logo-container"},[s("img",{staticStyle:{height:"50px"},attrs:{src:o("e8c3")}})]),s("el-menu-item",{staticClass:"right-menu",attrs:{index:"1"}}),s("el-submenu",{staticClass:"right-menu",attrs:{index:"3"}},[s("template",{slot:"title"},[s("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",fit:"scale-down"}}),e._v(" Hi, "),s("label",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.name))])],1),s("el-menu-item",{attrs:{index:"3-1"},on:{click:e.logout}},[s("i",{staticClass:"el-icon-right"}),e._v("Logout ")])],2),s("el-submenu",{staticClass:"right-menu",attrs:{index:"2"}},[s("template",{slot:"title"},[e._v("Project: "+e._s(e.currentProject.project.name))]),e._l(e.projectList,(function(t,o){return s("el-menu-item",{key:o,attrs:{index:"1"},on:{click:function(o){return e.selectProject(t)}}},[e._v(e._s(t.project.name))])})),s("el-menu-item",{staticStyle:{color:"#409EFF"},attrs:{index:"1-99"},on:{click:function(t){e.showNewProject=!0}}},[e._v("New")])],2)],1),s("el-dialog",{attrs:{title:"New Project",visible:e.showNewProject,width:"30%"},on:{"update:visible":function(t){e.showNewProject=t}}},[s("span",[s("el-input",{attrs:{type:"text",placeholder:"Project Name","prefix-icon":"el-icon-menu",maxlength:"100","show-word-limit":""},model:{value:e.newProjectForm.name,callback:function(t){e.$set(e.newProjectForm,"name",t)},expression:"newProjectForm.name"}}),s("div",{staticStyle:{margin:"20px 0"}}),s("el-input",{attrs:{type:"textarea",placeholder:"Note","prefix-icon":"el-icon-s-order",maxlength:"200","show-word-limit":""},model:{value:e.newProjectForm.description,callback:function(t){e.$set(e.newProjectForm,"description",t)},expression:"newProjectForm.description"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.showNewProject=!1}}},[e._v("Cancle")]),s("el-button",{attrs:{type:"primary"},on:{click:e.createNewProject}},[e._v("Create")])],1)])],1)}),l=[],i=o("7ded");function n(e,t,o){return e({url:"/rest/project/algorithm",method:"post",headers:{PROJECT:o.project.ref_id},data:t})}function c(e,t,o){return e({url:"/rest/project/algorithm",method:"delete",headers:{PROJECT:o.project.ref_id},data:t})}function d(e,t){return e({url:"/rest/project/config",method:"post",data:t})}function u(e){return e({url:"/rest/projects",method:"get"})}function p(e,t){return e({url:"/rest/project/config",method:"delete",headers:{PROJECT:t.ref_id},data:t})}function m(e,t,o){return e({url:"/rest/project/suffix",method:"post",headers:{PROJECT:o.project.ref_id},data:t})}function h(e,t,o){return e({url:"/rest/project/suffix",method:"delete",headers:{PROJECT:o.project.ref_id},data:t})}var f=o("56d7"),v={name:"headerNav",props:["projectList"],data:function(){return{name:this.$store.getters.name,showNewProject:!1,newProjectForm:{name:"",description:""},currentProject:JSON.parse(this.$store.getters.project)}},mounted:function(){},methods:{createNewProject:function(){var e=this;d(this.$requests.api,this.newProjectForm).then((function(t){e.$message({message:"Project Created Successful!",type:"success"}),e.showNewProject=!1,e.$emit("refreshProjectList","")}))},selectProject:function(e){this.$store.commit("SET_PROJECT",e),this.currentProject=JSON.parse(this.$store.getters.project),this.$message({message:"Switch to project - "+e.project.name,type:"success"}),f["default"].$emit("refreshModels","")},logout:function(){var e=this;i["b"](this.$requests.api).then((function(t){e.$store.commit("LOG_OUT"),e.$router.push("login")}))}}},b=v,g=(o("a6c4"),o("0c7c")),_=Object(g["a"])(b,r,l,!1,null,"04588b5b",null),w=_.exports,j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#409EFF","text-color":"#fff","active-text-color":"#ffffff"}},[o("el-menu-item",{attrs:{index:"1"}},[e._v("处理中心")]),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[e._v("我的工作台")]),o("el-menu-item",{attrs:{index:"2-1"}},[e._v("选项1")]),o("el-menu-item",{attrs:{index:"2-2"}},[e._v("选项2")]),o("el-menu-item",{attrs:{index:"2-3"}},[e._v("选项3")]),o("el-submenu",{attrs:{index:"2-4"}},[o("template",{slot:"title"},[e._v("选项4")]),o("el-menu-item",{attrs:{index:"2-4-1"}},[e._v("选项1")]),o("el-menu-item",{attrs:{index:"2-4-2"}},[e._v("选项2")]),o("el-menu-item",{attrs:{index:"2-4-3"}},[e._v("选项3")])],2)],2),o("el-menu-item",{attrs:{index:"3",disabled:""}},[e._v("消息中心")]),o("el-menu-item",{attrs:{index:"4"}},[o("a",{attrs:{href:"https://www.ele.me",target:"_blank"}},[e._v("订单管理")])]),o("transition",{attrs:{"enter-active-class":"animated slideInRight","leave-active-class":"animated slideOutRight",mode:"out-in"}},[e.showLaunchController?o("div",{key:"controler",staticClass:"launch-controler"},[o("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"GPU","inactive-text":"CPU"},model:{value:e.useGPU,callback:function(t){e.useGPU=t},expression:"useGPU"}}),o("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",plain:""},on:{click:e.launchContainer}},[e._v("Launch")])],1):o("el-menu-item",{key:"button",staticClass:"right-menu",staticStyle:{float:"right"},attrs:{index:"3"},on:{click:function(t){e.showLaunchController=!e.showLaunchController}}},[o("i",{staticClass:"el-icon-s-promotion",staticStyle:{color:"white"}}),e._v("Launch Notebook ")])],1)],1)],1)},x=[];function S(e,t){return e({url:"/rest/container/type/"+t,method:"post"})}var y={name:"secondName",data:function(){return{useGPU:!0,showLaunchController:!1}},methods:{launchContainer:function(){var e=this,t=this.useGPU?"gpu":"cpu";S(this.$requests.api,t).then((function(t){e.$emit("launchContainer",t.data),e.showLaunchController=!e.showLaunchController}))}}},C=y,k=(o("2fa3"),Object(g["a"])(C,j,x,!1,null,"fd8b7e00",null)),P=k.exports,N=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{position:"fixed",height:"100%","background-color":"white","z-index":"1000"}},[o("el-button",{class:[e.rotate?"uncollapse-btn":"collapse-btn"],on:{click:e.handleToggle}},[o("i",{class:[e.rotate?"uncollapse-icon el-icon-arrow-right":"collapse-icon el-icon-arrow-right"]})]),o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1-4-1",collapse:e.isCollapse},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-menu"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Code Template")])])],2),o("el-menu-item",{attrs:{index:"2"}},[o("i",{staticClass:"el-icon-menu"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("User Storage")])]),o("el-menu-item",{attrs:{index:"3"}},[o("i",{staticClass:"el-icon-document"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Model Center")])]),o("el-menu-item",{attrs:{index:"4"},on:{click:e.handleProjectManagement}},[o("i",{staticClass:"el-icon-document"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Project Management")])]),o("el-menu-item",{attrs:{index:"5"}},[o("i",{staticClass:"el-icon-setting"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Help")])])],1)],1)},M=[];function $(e){return e({url:"/rest/template/category",method:"get"})}var V={name:"sideNav",data:function(){return{isCollapse:!0,rotate:!1,templateList:{}}},props:{},computed:{},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},handleToggle:function(){this.isCollapse=!this.isCollapse,this.rotate=!this.rotate},handleProjectManagement:function(){this.$emit("projectSetting"),this.isCollapse=!1},handleTemplateCategory:function(){$().then((function(e){}))},handleTemplateCode:function(){}}},F=V,L=(o("84d9"),Object(g["a"])(F,N,M,!1,null,"7a707752",null)),T=L.exports,O=o("429a"),A=o.n(O),R=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.projectList,stripe:""}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-row",[o("el-col",{staticStyle:{"padding-right":"5px"},attrs:{span:8}},[o("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("Users")]),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(o){return e.openInvite(t.row.project)}}},[e._v("Invite")])],1),e._l(t.row.project.user_roles,(function(t,s){return o("div",{key:s,staticClass:"text item"},[o("p",[o("el-row",[o("el-col",{attrs:{span:6}},[e._v(e._s(t.user.username))]),o("el-col",{attrs:{span:10}},[e._v(e._s(t.user.email))]),o("el-col",{attrs:{span:4}},[e._v(e._s(t.role.name))]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[o("a",{staticStyle:{color:"#409EFF"},attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.alert(123)}}},[e._v("Delete")])])],1)],1)])})),0==t.row.project.user_roles.length?o("div",[e._v("No Users")]):e._e()],2)],1),o("el-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:8}},[o("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("Algorithms")]),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(o){return e.openNewAlgorithm(t.row.project)}}},[e._v("Add")])],1),e._l(t.row.project.algorithm_list,(function(t,s){return o("div",{key:s,staticClass:"text item"},[o("p",[o("el-row",[o("el-col",{attrs:{span:6}},[e._v(e._s(t.name))]),o("el-col",{attrs:{span:4}},[e._v("v"+e._s(t.current_cached_version)+"."+e._s(t.current_released_version))]),o("el-col",{attrs:{span:4}},[e._v(e._s(t.kafka_topic?t.kafka_topic:"None"))]),o("el-col",{attrs:{span:6}},[e._v(e._s(t.description))]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[o("a",{staticStyle:{color:"#409EFF"},attrs:{href:"javascript:void(0);"},on:{click:function(o){return e.deleteAlgorithm(t.id)}}},[e._v("Delete")])])],1)],1)])})),0==t.row.project.algorithm_list.length?o("div",[e._v("No algorithms")]):e._e()],2)],1),o("el-col",{staticStyle:{"padding-left":"5px"},attrs:{span:8}},[o("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("Suffix List")]),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(o){return e.openNewSuffix(t.row.project)}}},[e._v("Add")])],1),e._l(t.row.project.suffix_list,(function(t,s){return o("div",{key:s,staticClass:"text item"},[o("p",[o("el-row",[o("el-col",{attrs:{span:6}},[e._v("*."+e._s(t.name))]),o("el-col",{attrs:{span:10}},[e._v(e._s(e._f("dateFilter")(t.created_at)))]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[o("a",{staticStyle:{color:"#409EFF"},attrs:{href:"javascript:void(0);"},on:{click:function(o){return e.deleteSuffix(t.id)}}},[e._v("Delete")])])],1)],1)])})),0==t.row.project.suffix_list.length?o("div",[e._v("No suffixs defined")]):e._e()],2)],1)],1)]}}])}),o("el-table-column",{attrs:{label:"Project Name",prop:"project.name"}}),o("el-table-column",{attrs:{label:"Reference ID",prop:"project.ref_id"}}),o("el-table-column",{attrs:{label:"User Number",prop:"project.user_roles.length",width:"120"}}),o("el-table-column",{attrs:{label:"Your Role",prop:"role.name",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",{attrs:{type:"manager"===t.row.role.name?"primary":"success","disable-transitions":""}},[e._v(e._s(t.row.role.name))])]}}])}),o("el-table-column",{attrs:{label:"Created Time",prop:"created_at"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{staticClass:"el-icon-time"}),o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("dateFilter")(t.row.created_at)))])]}}])}),o("el-table-column",{attrs:{label:"Operations",prop:"operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"}},[e._v("Edit")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.deleteProject(t.row.project)}}},[e._v("Remove")])]}}])})],1),o("el-dialog",{attrs:{title:"Invite",visible:e.isInviteUserShow,width:"30%"},on:{"update:visible":function(t){e.isInviteUserShow=t}}},[o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.isInviteUserShow=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isInviteUserShow=!1}}},[e._v("Confirm")])],1)]),o("el-dialog",{attrs:{title:"New Algorithm",visible:e.isNewAlgorithmShow,width:"30%"},on:{"update:visible":function(t){e.isNewAlgorithmShow=t}}},[o("el-input",{staticStyle:{padding:"5px"},attrs:{placeholder:"Name"},model:{value:e.newAlgorithm.name,callback:function(t){e.$set(e.newAlgorithm,"name",t)},expression:"newAlgorithm.name"}}),o("el-input",{staticStyle:{padding:"5px"},attrs:{placeholder:"Kafka Channel"},model:{value:e.newAlgorithm.kafka_topic,callback:function(t){e.$set(e.newAlgorithm,"kafka_topic",t)},expression:"newAlgorithm.kafka_topic"}}),o("el-input",{staticStyle:{padding:"5px"},attrs:{type:"textarea",autosize:"",placeholder:"Descripttion"},model:{value:e.newAlgorithm.description,callback:function(t){e.$set(e.newAlgorithm,"description",t)},expression:"newAlgorithm.description"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.isNewAlgorithmShow=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:e.addAlgorithm}},[e._v("Confirm")])],1)],1),o("el-dialog",{attrs:{title:"Add Suffix",visible:e.isNewSuffixShow,width:"30%"},on:{"update:visible":function(t){e.isNewSuffixShow=t}}},[o("el-input",{staticStyle:{padding:"5px"},attrs:{placeholder:"Suffix(eg. *.model)"},model:{value:e.newSuffix.name,callback:function(t){e.$set(e.newSuffix,"name",t)},expression:"newSuffix.name"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.isNewSuffixShow=!1}}},[e._v("cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:e.addSuffix}},[e._v("Confirm")])],1)],1)]],2)},E=[],I={name:"projectSetting",props:["projectList"],mounted:function(){},data:function(){return{isNewAlgorithmShow:!1,isInviteUserShow:!1,isNewSuffixShow:!1,newAlgorithm:{},newUser:{},newSuffix:{},currentSelectProject:{}}},methods:{deleteProject:function(e){var t=this;p(this.$requests.api,e).then((function(e){t.$message({message:"Delete successful!",type:"success"}),t.$emit("refreshProjectList","")}))},addAlgorithm:function(){var e=this;this.newAlgorithm.project={id:this.currentSelectProject.id},n(this.$requests.api,this.newAlgorithm,JSON.parse(this.$store.getters.project)).then((function(t){e.$message({message:"Algorithm created successful!",type:"success"}),e.isNewAlgorithmShow=!1,e.$emit("refreshProjectList",""),e.newAlgorithm={}}))},deleteAlgorithm:function(e){var t=this;c(this.$requests.api,[{id:e}],JSON.parse(this.$store.getters.project)).then((function(e){t.$message({message:"Algorithm delete successful!",type:"success"}),t.$emit("refreshProjectList","")}))},addSuffix:function(){var e=this;this.newSuffix.project={id:this.currentSelectProject.id},m(this.$requests.api,this.newSuffix,JSON.parse(this.$store.getters.project)).then((function(t){e.$message({message:"Suffix add successful!",type:"success"}),e.isNewSuffixShow=!1,e.$emit("refreshProjectList",""),e.newSuffix={}}))},deleteSuffix:function(e){var t=this;h(this.$requests.api,[{id:e}],JSON.parse(this.$store.getters.project)).then((function(e){t.$message({message:"Suffix delete successful!",type:"success"}),t.$emit("refreshProjectList","")}))},openInvite:function(e){this.currentSelectProject=e,this.isInviteUserShow=!0},openNewAlgorithm:function(e){this.currentSelectProject=e,this.isNewAlgorithmShow=!0},openNewSuffix:function(e){this.currentSelectProject=e,this.isNewSuffixShow=!0}}},J=I,U=Object(g["a"])(J,R,E,!1,null,"beb35f08",null),B=U.exports,D=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-collapse-item",{attrs:{title:"Pending Models",name:"1"}},[o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.modelList.newModels.content}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("Comments: "+e._s(t.row.comments?t.row.comments:"None"))]}}])}),o("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),o("el-table-column",{attrs:{prop:"name",label:"Name"}}),o("el-table-column",{attrs:{prop:"status",label:"Status",width:"100"}}),o("el-table-column",{attrs:{prop:"owner.username",label:"Owner"}}),o("el-table-column",{attrs:{prop:"cachedVersion",label:"Cached Version"}}),o("el-table-column",{attrs:{prop:"releasedVersion",label:"Released Version"}}),o("el-table-column",{attrs:{prop:"lastOperator.username",label:"Last Operator"}}),o("el-table-column",{attrs:{prop:"updatedAt",label:"Update Time"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFilter")(t.row.updatedAt)))]}}])}),o("el-table-column",{attrs:{prop:"created_at",label:"Create Time"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFilter")(t.row.created_at)))]}}])}),o("el-table-column",{attrs:{label:"Operations",prop:"operation",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){return e.openApprovalBox(t.row)}}},[e._v("Approve")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.openRejectBox(t.row)}}},[e._v("Reject")]),o("el-dialog",{attrs:{title:"Approve Panel",visible:e.approvalBoxVisible,width:"30%"},on:{"update:visible":function(t){e.approvalBoxVisible=t}}},[o("p",[e._v("Model Name: "+e._s(e.selectModel.name))]),o("p",[e._v("Owner: "+e._s(e.selectModel.owner.username))]),o("p",[e._v("Created Time:"+e._s(e._f("dateFilter")(e.selectModel.created_at)))]),o("el-divider"),o("el-select",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请选择"},model:{value:e.approvalForm.algorithm,callback:function(t){e.$set(e.approvalForm,"algorithm",t)},expression:"approvalForm.algorithm"}},e._l(e.algorithms,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),o("el-switch",{staticStyle:{display:"block","margin-bottom":"20px","margin-left":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Cached version","inactive-text":"Released version"},model:{value:e.approvalForm.isCachedVersion,callback:function(t){e.$set(e.approvalForm,"isCachedVersion",t)},expression:"approvalForm.isCachedVersion"}}),o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Your comments"},model:{value:e.approvalForm.comment,callback:function(t){e.$set(e.approvalForm,"comment",t)},expression:"approvalForm.comment"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.approvalBoxVisible=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:e.handleApprove}},[e._v("Confirm")])],1)],1),o("el-dialog",{attrs:{title:"Reject Panel",visible:e.rejectBoxVisible,width:"30%"},on:{"update:visible":function(t){e.rejectBoxVisible=t}}},[o("p",[e._v("Model Name: "+e._s(e.selectModel.name))]),o("p",[e._v("Owner: "+e._s(e.selectModel.owner.username))]),o("p",[e._v("Created Time:"+e._s(e._f("dateFilter")(e.selectModel.created_at)))]),o("el-divider"),o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Your comments"},model:{value:e.approvalForm.comment,callback:function(t){e.$set(e.approvalForm,"comment",t)},expression:"approvalForm.comment"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.rejectBoxVisible=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:e.handleReject}},[e._v("Confirm")])],1)],1)]}}])})],1)],1)]),o("el-collapse-item",{attrs:{title:"Approved Models",name:"2"}},[o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.modelList.approvalModels.content}},[o("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),o("el-table-column",{attrs:{prop:"name",label:"Name"}}),o("el-table-column",{attrs:{prop:"status",label:"Status",width:"100"}}),o("el-table-column",{attrs:{prop:"owner.username",label:"Owner"}}),o("el-table-column",{attrs:{prop:"cachedVersion",label:"Cached Version"}}),o("el-table-column",{attrs:{prop:"releasedVersion",label:"Released Version"}}),o("el-table-column",{attrs:{prop:"lastOperator.username",label:"Last Operator"}}),o("el-table-column",{attrs:{prop:"updatedAt",label:"Update Time"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFilter")(t.row.updatedAt)))]}}])}),o("el-table-column",{attrs:{prop:"created_at",label:"Create Time"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFilter")(t.row.created_at)))]}}])}),o("el-table-column",{attrs:{label:"Operations",prop:"operation",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isReleased?e._e():o("div",[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){return e.handleRelease(t.row)}}},[e._v("Release")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleRollback(t.row)}}},[e._v("Rollback")])],1),t.row.isReleased?o("p",[e._v("Model has been published!")]):e._e()]}}])})],1)],1)]),o("el-collapse-item",{attrs:{title:"Rejected Models",name:"3"}},[o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.modelList.rejectedModels.content}},[o("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),o("el-table-column",{attrs:{prop:"name",label:"Name"}}),o("el-table-column",{attrs:{prop:"status",label:"Status",width:"100"}}),o("el-table-column",{attrs:{prop:"owner.username",label:"Owner"}}),o("el-table-column",{attrs:{prop:"cachedVersion",label:"Cached Version"}}),o("el-table-column",{attrs:{prop:"releasedVersion",label:"Released Version"}}),o("el-table-column",{attrs:{prop:"lastOperator.username",label:"Last Operator"}}),o("el-table-column",{attrs:{prop:"updatedAt",label:"Update Time"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFilter")(t.row.updatedAt)))]}}])}),o("el-table-column",{attrs:{prop:"created_at",label:"Create Time"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFilter")(t.row.created_at)))]}}])}),o("el-table-column",{attrs:{label:"Operations",prop:"operation",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){return e.handleRollback(t.row)}}},[e._v("Rollback")])]}}])})],1)],1)])],1)],1)},q=[];function z(e,t){return e({url:"/rest/model/",method:"get",headers:{PROJECT:t}})}function G(e,t,o){return e({url:"/rest/model/",method:"put",headers:{PROJECT:o},data:t})}function H(e,t){return e({url:"/rest/model/init",method:"post",headers:{PROJECT:t}})}var Y={name:"modelCenter",mounted:function(){var e=this;this.handleModelList(),f["default"].$on("refreshModels",(function(t){e.handleModelList()}))},data:function(){return{activeName:"1",modelList:{rejectedModels:{content:[]},newModels:{content:[]},approvalModels:{content:[]}},algorithms:[],selectModel:{name:"",owner:{username:""},created_at:""},approvalForm:{isCachedVersion:!0,comment:""},rejectForm:{comment:""},approvalBoxVisible:!1,rejectBoxVisible:!1,releaseBoxVisible:!1}},methods:{handleModelList:function(){var e=this;z(this.$requests.api,JSON.parse(this.$store.getters.project).project.ref_id).then((function(t){e.modelList=t.data,console.log(t.data)}))},handleApprove:function(){var e=this;this.selectModel.cachedVersion||(this.selectModel.cachedVersion=0),this.selectModel.releasedVersion||(this.selectModel.releasedVersion=0),this.approvalForm.isCachedVersion?this.selectModel.cachedVersion++:this.selectModel.releasedVersion++,""!=this.approvalForm.comment&&(this.approvalForm.comment=this.$store.getters.name+" :"+this.approvalForm.comment,this.selectModel.comment=this.selectModel.comment?this.selectModel.comment+"<br/>"+this.approvalForm.comment:this.approvalForm.comment),this.selectModel.status="APPROVED";var t={id:this.selectModel.id,name:this.selectModel.name,status:"APPROVED",comments:this.approvalForm.comment,refId:this.selectModel.refId,cachedVersion:this.selectModel.cachedVersion,releasedVersion:this.selectModel.releasedVersion,updatedAt:(new Date).getTime(),algorithm:{id:this.approvalForm.algorithm},suffix:this.selectModel.suffix,project:{id:this.selectModel.project.id},isReleased:!1,created_at:this.selectModel.created_at,deleted_at:null,is_deleted:!1};G(this.$requests.api,t,JSON.parse(this.$store.getters.project).project.ref_id).then((function(t){e.handleModelList(),e.$message({message:"Model has been approved!",type:"success"}),e.approvalBoxVisible=!1}))},handleReject:function(){var e=this;""!=this.rejectForm.comment&&(this.rejectForm.comment=this.$store.getters.name+" :"+this.rejectForm.comment,this.selectModel.comment=this.selectModel.comment?this.selectModel.comment+"<br/>"+this.rejectForm.comment:this.rejectForm.comment);var t={id:this.selectModel.id,name:this.selectModel.name,status:"REJECTED",comments:this.rejectForm.comment,refId:this.selectModel.refId,cachedVersion:this.selectModel.cachedVersion,releasedVersion:this.selectModel.releasedVersion,updatedAt:(new Date).getTime(),suffix:this.selectModel.suffix,project:{id:this.selectModel.project.id},isReleased:!1,created_at:this.selectModel.created_at,deleted_at:null,is_deleted:!1};G(this.$requests.api,t,JSON.parse(this.$store.getters.project).project.ref_id).then((function(t){e.handleModelList(),e.$message({message:"Model has been rejected!",type:"success"}),e.rejectBoxVisible=!1}))},handleRollback:function(e){var t=this,o={id:e.id,name:e.name,status:"NEW",comments:null,refId:e.refId,cachedVersion:e.cachedVersion,releasedVersion:e.releasedVersion,updatedAt:(new Date).getTime(),algorithm:e.algorithm,suffix:e.suffix,project:{id:e.project.id},isReleased:!0,created_at:e.created_at,deleted_at:null,is_deleted:!1};G(this.$requests.api,o,JSON.parse(this.$store.getters.project).project.ref_id).then((function(e){t.handleModelList(),t.$message({message:"Model has been rollback!",type:"success"})}))},handleRelease:function(e){var t=this,o={id:e.id,name:e.name,status:"APPROVED",comments:null,refId:e.refId,cachedVersion:e.cachedVersion,releasedVersion:e.releasedVersion,updatedAt:(new Date).getTime(),algorithm:e.algorithm,suffix:e.suffix,project:{id:e.project.id},isReleased:!0,created_at:e.created_at,deleted_at:null,is_deleted:!1};G(this.$requests.api,o,JSON.parse(this.$store.getters.project).project.ref_id).then((function(e){t.handleModelList(),t.$message({message:"Model has been released!",type:"success"})}))},openApprovalBox:function(e){this.algorithms=JSON.parse(this.$store.getters.project).project.algorithm_list,this.approvalBoxVisible=!0,this.selectModel=e},openRejectBox:function(e){this.rejectBoxVisible=!0,this.selectModel=e}}},K=Y,W=Object(g["a"])(K,D,q,!1,null,"38a485ea",null),Q=W.exports,X={data:function(){return{cavans_config:{color:"0,0,255",opacity:.7,zIndex:-2,count:120},isProjectSettingShow:!0,isModelCenterShow:!0,isCollapse:!0,editableTabsValue:"project",editableTabs:[],tabIndex:2,projectList:JSON.parse(this.$store.getters.projectList)}},components:{HeaderNav:w,SecondNav:P,SideNav:T,vueCanvasNest:A.a,ProjectSetting:B,ModelCenter:Q},mounted:function(){},methods:{addResourceTab:function(e,t){var o=++this.tabIndex+"";this.editableTabs.push({title:e,name:o,content:"<iframe src=http://"+t+' style="width:100%; height:100%"></iframe>',type:"notebook",url:t}),this.editableTabsValue=o},addProjectSettingTab:function(e){var t=++this.tabIndex+"";this.editableTabs.push({title:e,name:t,content:'<div :is="ProjectSetting" ></div>',type:"project"}),this.editableTabsValue=t},removeSettingTab:function(){this.isProjectSettingShow=!1},removeTab:function(e){var t=this.editableTabs,o=this.editableTabsValue;o===e&&t.forEach((function(s,a){if(s.name===e){var r=t[a+1]||t[a-1];r&&(o=r.name)}})),this.editableTabsValue=o,this.editableTabs=t.filter((function(t){return t.name!==e}))},openNotebookInNewBroser:function(e){window.open("http://"+e,"_blank","toolbar=yes, width=1300, height=900")},handleLaunchContainer:function(e){this.addResourceTab("Juyter Notebook",e.url)},handleStaging:function(){var e=this;H(this.$requests.api,JSON.parse(this.$store.getters.project).project.ref_id).then((function(t){e.$message({message:"Models have been submited successful!",type:"success"})}))},handleProjectList:function(){var e=this;u(this.$requests.api).then((function(t){e.$store.commit("SET_PROJECTLIST",t.data),e.projectList=t.data}))},handleProjectSetting:function(e){this.addProjectSettingTab("Projects Center")}}},Z=X,ee=(o("7528"),Object(g["a"])(Z,s,a,!1,null,"634bbda3",null));t["default"]=ee.exports},"84d9":function(e,t,o){"use strict";var s=o("af63"),a=o.n(s);a.a},"9d8f":function(e,t,o){},a6c4:function(e,t,o){"use strict";var s=o("b565"),a=o.n(s);a.a},af63:function(e,t,o){},b565:function(e,t,o){}}]);